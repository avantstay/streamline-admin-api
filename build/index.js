!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("puppeteer")},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),u=n(1),a=n(0),i=function(e,t,n,r){return new(n||(n=Promise))(function(o,u){function a(e){try{s(r.next(e))}catch(e){u(e)}}function i(e){try{s(r.throw(e))}catch(e){u(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,i)}s((r=r.apply(e,t||[])).next())})},s=function(e,t){var n,r,o,u,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(u){return function(i){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&u[0]?"return":u[0]?"throw":"next"])&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[0,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}},c="https://admin.streamlinevrs.com",l=function(e,t){return c+"/editor_email_company_document_template.html?template_id="+e+"&company_id="+t},p=function(){function e(e){var t=this;this.username=e.username,this.password=e.password,this.companyId=e.companyId,this.browser=o.a.launch({headless:!0}),this.page=this.browser.then(function(e){return i(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,e.newPage()];case 1:return[2,t.sent()]}})})}).then(function(e){return i(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.authenticate(e)];case 1:return[2,t.sent()]}})})})}return e.prototype.authenticate=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,e.goto("https://admin.streamlinevrs.com/auth_login.html?logout=1")];case 1:return t.sent(),[4,e.waitForSelector("#user_login")];case 2:return t.sent(),[4,e.type("#user_login",this.username)];case 3:return t.sent(),[4,e.type("#user_password",this.password)];case 4:return t.sent(),[4,e.click("#submit_button")];case 5:return t.sent(),[4,e.waitForSelector("#page_title_bar_title")];case 6:return t.sent(),[2,e]}})})},e.prototype.backupTemplate=function(e,t){return i(this,void 0,void 0,function(){var n,r;return s(this,function(o){switch(o.label){case 0:return[4,this.page];case 1:return[4,(n=o.sent()).goto(l(e,this.companyId))];case 2:return o.sent(),[4,n.waitForSelector("[title=Source]")];case 3:return o.sent(),[4,n.evaluate(function(){return document.querySelector("textarea[name=page_text]").value})];case 4:return r=o.sent(),u.writeFileSync(a.join(t,"template-"+e+".html"),r),[2]}})})},e.prototype.updateEmailTemplate=function(e,t){return i(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return[4,this.page];case 1:return[4,(n=r.sent()).goto(l(e,this.companyId))];case 2:return r.sent(),[4,n.waitForSelector("[title=Source]")];case 3:return r.sent(),[4,n.click("[title=Source]")];case 4:return r.sent(),[4,n.waitFor(500)];case 5:return r.sent(),[4,n.evaluate(function(){return document.querySelector("textarea[role=textbox]").value=""})];case 6:return r.sent(),[4,n.type("textarea[role=textbox]",t)];case 7:return r.sent(),[4,n.click("[name=modify_button]")];case 8:return r.sent(),[4,n.waitForSelector(".tooltip")];case 9:return r.sent(),[2]}})})},e.prototype.updateHomeNetworkId=function(e,t){return i(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return[4,this.page];case 1:return[4,(n=r.sent()).goto((o=e,c+"/edit_home.html?home_id="+o))];case 2:return r.sent(),[4,n.waitForSelector("input[name=property_variable_5028]")];case 3:return r.sent(),[4,n.evaluate(function(){return document.querySelector("[name=property_variable_5028]").value=""})];case 4:return r.sent(),[4,n.type("[name=property_variable_5028]",""+t)];case 5:return r.sent(),[4,n.click("[type=submit][name=modify_button]")];case 6:return r.sent(),[4,n.waitForSelector(".yui-dialog #yui-gen0-button")];case 7:return r.sent(),[4,n.click(".yui-dialog #yui-gen0-button")];case 8:return r.sent(),[4,n.waitFor(1e3)];case 9:return r.sent(),[4,n.waitForSelector("input[name=property_variable_5028]")];case 10:return r.sent(),[2]}var o})})},e.prototype.close=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.browser];case 1:return[4,e.sent().close()];case 2:return e.sent(),[2]}})})},e}();t.default=p}]);